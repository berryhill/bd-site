---
import { slugifyStr } from "@/utils/slugify";
import type { CollectionEntry } from "astro:content";
import { getPath } from "@/utils/getPath";
import Datetime from "./Datetime.astro";

export interface Props extends CollectionEntry<"blog"> {
  variant?: "h2" | "h3";
}

const { variant = "h2", data, id, filePath } = Astro.props;

const { title, description, pubDatetime, modDatetime, timezone } = data;

const headerProps = {
  style: { viewTransitionName: slugifyStr(title) },
  class: "text-lg font-medium decoration-dashed hover:underline",
};
---

<li class="group relative h-full">
  <div class="h-full border-4 border-border bg-card-bg p-6
              transition-all duration-150
              hover:shadow-card-hover hover:translate-x-1 hover:translate-y-1">

    <!-- Content -->
    <div class="relative flex flex-col h-full">
      <a
        href={getPath(id, filePath)}
        class="block mb-4 group-hover:text-accent transition-colors duration-100"
      >
        {
          variant === "h2" ? (
            <h2 class="text-2xl font-black leading-none uppercase tracking-tight">{title}</h2>
          ) : (
            <h3 class="text-xl font-black leading-none uppercase tracking-tight">{title}</h3>
          )
        }
      </a>

      <div class="border-t-2 border-accent w-16 mb-4"></div>

      <Datetime {pubDatetime} {modDatetime} {timezone}
                class="text-xs font-bold uppercase tracking-wider mb-4" />

      <p class="flex-grow font-mono text-sm leading-relaxed">{description}</p>

      <!-- Brutal corner accent -->
      <div class="absolute top-0 right-0 w-4 h-4 bg-accent"></div>
    </div>
  </div>
</li>

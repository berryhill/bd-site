---
import { slugifyStr } from "@/utils/slugify";
import type { CollectionEntry } from "astro:content";
import { getPath } from "@/utils/getPath";
import Datetime from "./Datetime.astro";

export interface Props extends CollectionEntry<"blog"> {
  variant?: "h2" | "h3";
}

const { variant = "h2", data, id, filePath } = Astro.props;

const { title, description, pubDatetime, modDatetime, timezone } = data;
---

<li class="brutal-card">
  <div class="card-border">
    <!-- Exposed metadata -->
    <div class="card-meta">
      [{pubDatetime.toISOString().split('T')[0]}]
    </div>

    <!-- Raw link -->
    <a href={getPath(id, filePath)}>
      {variant === "h2" ? (
        <h2>{'>>> ' + title.toUpperCase()}</h2>
      ) : (
        <h3>{'>>> ' + title}</h3>
      )}
    </a>

    <!-- Plain description -->
    <p class="card-desc">
      {description}
    </p>

    <!-- ASCII arrow -->
    <div class="card-arrow">
      ──────────────────>
    </div>
  </div>
</li>

<style>
  .brutal-card {
    border: 3px solid var(--border);
    background: var(--background);
    padding: 0;
    margin: 15px 0;
    list-style: none;
  }

  .card-border {
    border: 1px solid var(--border);
    margin: 5px;
    padding: 15px;
  }

  .card-meta {
    font-family: 'Courier New', monospace;
    font-size: 12px;
    margin-bottom: 10px;
    text-transform: uppercase;
  }

  .brutal-card h2,
  .brutal-card h3 {
    margin: 10px 0;
  }

  .brutal-card a {
    text-decoration: none;
    color: var(--accent);
  }

  .card-desc {
    margin: 10px 0;
    line-height: 1.4;
    font-size: 14px;
  }

  .card-arrow {
    font-family: monospace;
    margin-top: 10px;
    font-size: 14px;
    color: var(--foreground-muted);
  }

  .brutal-card:hover {
    background: var(--highlight);
    transform: translate(-3px, -3px);
    box-shadow: 3px 3px 0 var(--border);
  }

  html[data-theme="dark"] .brutal-card {
    border-color: var(--border);
    background: var(--card-bg);
  }

  html[data-theme="dark"] .brutal-card:hover {
    background: var(--muted);
    box-shadow: 3px 3px 0 var(--border);
  }
</style>
